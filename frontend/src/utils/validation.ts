export const VALID_COLLEGE_CODES = new Set([
    '1101', '1102', '1103', '1104', '1105', '1106', '1107', '1108', '1109', '1110',
    '1111', '1112', '1113', '1114', '1115', '1116', '1117', '1118', '1119', '1120',
    '1121', '1122', '1123', '1124', '1125', '1126', '1127', '1128', '1130', '1131',
    '1132', '1133', '2101', '2102', '2103', '2104', '2105', '2106', '2108', '2109',
    '2110', '2111', '2112', '2113', '2114', '2115', '2116', '2117', '2118', '2119',
    '2120', '2121', '2122', '2124', '2126', '2127', '2128', '2129', '3102', '3103',
    '3104', '3105', '3106', '3107', '3108', '3109', '3110', '3111', '3112', '3113',
    '3114', '3115', '3116', '3117', '3118', '3120', '3121', '3122', '3123', '3124',
    '3125', '3126', '3128', '3133', '4209', '4210', '4211', '4212', '4213', '4214',
    '4216', '4217', '4218', '4219', '4220', '4221', '4222', '4223', '4224', '4225',
    '4226', '4227', '4228', '5102', '5103', '5104', '5105', '5106', '5107', '5108',
    '5109', '5110', '5111', '5112', '5113', '5114', '5115', '5116', '5117', '5118',
    '5119', '5120', '5121', '5122', '5123', '5124', '5125', '5126', '5127', '5128',
    '5129', '5130', '5131', '5132', '5133', '6105', '6106', '6107', '6108', '6109',
    '6110', '6111', '6112', '6113', '6114', '6115', '6116', '6117', '6118', '6120',
    '6122', '6123', '6124', '6125', '6126', '6127', '6128', '6129', '6130', '6133',
    '6177', '6201', '6202', '6203', '6204', '6205', '6206', '6207', '6208', '6209',
    '6210', '6211', '6212', '6213', '6214', '6215', '6216', '6217', '6218', '6220',
    '6221', '6222', '6223', '6224', '6225', '6226', '6227', '6228', '6229', '6230',
    '6231', '6232', '6234', '7100', '7101', '7103', '7104', '7106', '7107', '7108',
    '7109', '7110', '7111', '7112', '7113', '7115', '7116', '7117', '7118', '7121',
    '7122', '7123', '7125', '7126', '7128', '7129', '7130', '7131', '7132', '7133',
    '7136', '7138', '7139', '7140', '7141', '7142', '7143', '7144', '7146', '7147',
    '7176', '7177', '7178', '7179', '7180', '7181', '7201', '7202', '7203', '7205',
    '7206', '7207', '7208', '7209', '7210', '7211', '7212', '7214', '7215', '7216',
    '7217', '7218', '7219', '7221', '7222', '7223', '7224', '7228', '7229', '7230',
    '7233', '7238', '7276', '7277', '7278', '7301', '7302', '7304', '7305', '7306',
    '7308', '7309', '7311', '7312', '7313', '7314', '7315', '7316', '7317', '7321',
    '7322', '7323', '7324', '7325', '7326', '7327', '7328', '7329', '7330', '7331',
    '7332', '7378', '8104', '8105', '8106', '8107', '8109', '8110', '8111', '8114',
    '8115', '8116', '8117', '8119', '8120', '8121', '8122', '8125', '8126', '8127',
    '8129', '8134', '8135', '8136', '8142', '8143', '8146', '8147', '8148', '8201',
    '8202', '8203', '8204', '8205', '8206', '8207', '8208', '8209', '8210', '8211',
    '8212', '8213', '8214', '8215', '8216', '8218', '8219', '8220', '8221', '8222',
    '8223', '8224', '9102', '9103', '9104', '9105', '9106', '9107', '9108', '9109',
    '9110', '9111', '9112', '9114', '9115', '9116', '9117', '9118', '9119', '9120',
    '9121', '9122', '9123', '9124', '9125', '9126', '9127', '9129', '9130', '9131',
    '9132', '9201', '9202', '9203', '9204', '9205', '9206', '9207', '9208', '9209',
    '9210', '9211', '9212', '9213', '9214', '9215', '9216', '9217', '9218', '9219',
    '9220', '9221', '9222', '9223', '9224', '9225', '9226', '9227', '9500', '9501',
    '9503', '9504', '9505', '9506', '9507', '9508', '9509', '9510', '9512', '9513',
    '9514', '9516', '9517', '9518', '9519', '9520', '9522', '9523', '9524', '9525',
    '9526', '9527', '9528', '9530', '9531', '9532', '9533', '9534', '9535', '9537',
    '9576', '9601', '9602', '9603', '9604', '9605', '9606', '9607', '9608', '9609',
    '9610', '9611', '9612', '9613', '9614', '9615', '9616', '9617', '9618', '9619',
    '9620', '9621', '9622', '9623', '9624', '9625', '9626', '9627', '9628', '9629',
    '9630', '9631', '9632'
]);

export const VALID_BRANCH_CODES = new Set([
    '101', '102', '103', '104', '105', '106', '107', '108', '109', '110',
    '111', '112', '113', '114', '115', '116', '117', '118', '119', '120',
    '121', '122', '123', '124', '125', '126', '127', '128', '129', '130',
    '131', '132', '133', '134', '135', '136', '137', '138', '139', '140',
    '141', '201', '202', '203', '204', '205', '206', '207', '208', '209',
    '210', '211', '212', '213', '214', '215', '216', '217', '218', '219',
    '220', '221', '222', '223', '224', '225', '226', '227', '228', '229',
    '230', '231', '232', '233', '234', '235', '236', '237', '238', '251'
]);

export interface ValidationResult {
    isValid: boolean;
    error?: string;
}

export const validateRegisterNumber = (regNo: string): ValidationResult => {
    if (!regNo) return { isValid: false, error: 'Registration number is required' };

    // Format:
    // Digits 1-4 (College Code)
    // Digits 5-6 (Year of Admission)
    // Digits 7-9 (Branch Code)
    // Digits 10-12 (Serial Number: 0xx-9xx)

    // 1. Check Length
    if (regNo.length !== 12) {
        return { isValid: false, error: 'Registration number must be exactly 12 digits' };
    }

    // 2. Check Valid Digits
    if (!/^\d+$/.test(regNo)) {
        return { isValid: false, error: 'Registration number must contain only digits' };
    }

    const collegeCode = regNo.substring(0, 4);
    //   const yearCode = regNo.substring(4, 6); // Any 2 digits allowd
    const branchCode = regNo.substring(6, 9);
    //   const serialNumber = regNo.substring(9, 12); // Any 3 digits allowed? Prompt says 0xx-9xx which is basically any 3 digits.

    // 3. Validate College Code
    if (!VALID_COLLEGE_CODES.has(collegeCode)) {
        return { isValid: false, error: `Invalid College Code: ${collegeCode}` };
    }

    // 4. Validate Branch Code
    if (!VALID_BRANCH_CODES.has(branchCode)) {
        return { isValid: false, error: `Invalid Branch Code: ${branchCode}` };
    }

    return { isValid: true };
};
